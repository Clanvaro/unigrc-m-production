# =============================================================================
# RiskMatrix Pro - Environment Variables Template
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
#
# Compatible with:
# - Replit deployment
# - AWS (EC2, ECS, Elastic Beanstalk, App Runner, Lambda)
# - Self-hosted (Docker, PM2, systemd)
# =============================================================================

# -----------------------------------------------------------------------------
# NODE ENVIRONMENT
# -----------------------------------------------------------------------------
NODE_ENV=development
# Options: development | production

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
PORT=5000
# The port your application will run on

# -----------------------------------------------------------------------------
# DATABASE (PostgreSQL)
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://user:password@host:port/database?sslmode=require
# For Replit: automatically provided
# For AWS RDS: postgresql://user:password@rds-endpoint:5432/dbname
# For local: postgresql://localhost:5432/riskmatrix

# -----------------------------------------------------------------------------
# SECURITY - SESSION & CSRF (REQUIRED)
# -----------------------------------------------------------------------------
SESSION_SECRET=generate-a-secure-random-string-at-least-32-chars
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# CRITICAL: Must be different in each environment

CSRF_SECRET=generate-another-secure-random-string-at-least-32-chars
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# CRITICAL: Must be different in each environment

# Trust Proxy Configuration (for AWS deployments behind load balancers)
TRUST_PROXY_COUNT=1
# AWS ALB only: 1
# CloudFront + ALB: 2
# Multiple proxies: count from client to server

# -----------------------------------------------------------------------------
# CORS - ALLOWED ORIGINS
# -----------------------------------------------------------------------------
# For Replit (auto-configured)
REPLIT_DOMAINS=
# Example: myapp.replit.app,myapp-production.replit.app

# For AWS Deployments
AWS_ALLOWED_ORIGINS=
# Example: https://app.example.com,https://www.example.com

CLOUDFRONT_DOMAIN=
# Example: d123456abcdef8.cloudfront.net

ALB_DOMAIN=
# Example: my-alb-123456789.us-east-1.elb.amazonaws.com

# -----------------------------------------------------------------------------
# REPLIT AUTHENTICATION (Optional - if using Replit Auth)
# -----------------------------------------------------------------------------
REPLIT_AUTH_ENABLED=false
# Set to 'true' to enable Replit authentication

# -----------------------------------------------------------------------------
# OBJECT STORAGE - Google Cloud Storage (Optional)
# -----------------------------------------------------------------------------
GCS_BUCKET_NAME=
# Your GCS bucket name for file uploads

GCS_PROJECT_ID=
# Your Google Cloud project ID

GCS_KEY_FILE=
# Path to service account key file (e.g., ./gcs-key.json)

# Or use individual credentials:
GCS_CLIENT_EMAIL=
GCS_PRIVATE_KEY=

# -----------------------------------------------------------------------------
# EMAIL - SendGrid (Optional)
# -----------------------------------------------------------------------------
SENDGRID_API_KEY=
# Your SendGrid API key for sending emails

SENDGRID_FROM_EMAIL=
# Default sender email (e.g., noreply@example.com)

SENDGRID_FROM_NAME=
# Default sender name (e.g., RiskMatrix Pro)

# -----------------------------------------------------------------------------
# SMS - Twilio (Optional)
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=
# Your Twilio Account SID

TWILIO_AUTH_TOKEN=
# Your Twilio Auth Token

TWILIO_PHONE_NUMBER=
# Your Twilio phone number (e.g., +1234567890)

# -----------------------------------------------------------------------------
# AWS-SPECIFIC CONFIGURATION (Optional)
# -----------------------------------------------------------------------------
# AWS Secrets Manager (alternative to .env for production)
AWS_SECRETS_MANAGER_SECRET_ID=
# Secret ID in AWS Secrets Manager containing all secrets

# AWS Parameter Store (alternative to .env for production)
AWS_PARAMETER_STORE_PATH=
# Path prefix in Parameter Store (e.g., /riskmatrix/prod/)

# AWS Region
AWS_REGION=us-east-1
# Region for AWS services

# -----------------------------------------------------------------------------
# REDIS (Optional - for session storage in production cluster)
# -----------------------------------------------------------------------------
REDIS_URL=
# For AWS ElastiCache: redis://primary-endpoint:6379
# For local: redis://localhost:6379

# -----------------------------------------------------------------------------
# LOGGING & MONITORING (Optional)
# -----------------------------------------------------------------------------
LOG_LEVEL=info
# Options: error | warn | info | debug

SENTRY_DSN=
# Sentry error tracking DSN (optional)

# -----------------------------------------------------------------------------
# RATE LIMITING (Optional - overrides defaults)
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
# Window in milliseconds (default: 15 minutes = 900000)

RATE_LIMIT_MAX_REQUESTS=100
# Max requests per window (default: 100)

RATE_LIMIT_AUTH_MAX=5
# Max auth attempts per window (default: 5)

# -----------------------------------------------------------------------------
# DEPLOYMENT PLATFORM FLAGS
# -----------------------------------------------------------------------------
IS_AWS_DEPLOYMENT=false
# Set to 'true' when deploying to AWS

IS_REPLIT_DEPLOYMENT=false
# Set to 'true' when deploying to Replit

# -----------------------------------------------------------------------------
# HEALTH CHECKS & MONITORING
# -----------------------------------------------------------------------------
HEALTH_CHECK_PATH=/health
# Path for health check endpoint (for AWS ALB/ECS)

# -----------------------------------------------------------------------------
# NOTES FOR AWS DEPLOYMENT
# -----------------------------------------------------------------------------
# 1. Use AWS Secrets Manager or Parameter Store for sensitive values in production
# 2. Configure ALB health checks to use /health endpoint
# 3. Set up CloudWatch for monitoring and logs
# 4. Use RDS PostgreSQL with Multi-AZ for high availability
# 5. Enable ElastiCache Redis for session storage in multi-instance deployments
# 6. Configure CloudFront with SSL/TLS certificate
# 7. Set up WAF rules for additional security
# 8. Use Auto Scaling Groups for ECS/EC2 deployments
# =============================================================================
